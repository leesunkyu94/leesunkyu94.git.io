---
title: "C언어 및 기본문법 소개"
categories:
    - C-Programming
---

# C프로그래밍 소개

## C언어
UNIX 운영체제를 만들기 위해 데니스 리치가 고안한 프로그래밍 언어이다. 일반적으로 컴파일을 통해서 하드웨어에 종속적인 어셈블리 언어로 바뀐다. 고급언어 중에서 하드웨어와 가장 친근한 언어이다. 주로 운영체제, 시스템 소프트웨어를 제작하는데 사용된다. 컴퓨터공학과를 입학하면 주로 처음 배우는 프로그래밍 언어이다.

## High-level Language
컴퓨터는 크게 CPU, 메모리, I/O장치로 이루어져 있다. CPU는 Universal Machine으로 주어지는 instruction의 조합으로 다양한 기능을 수행하는 기계이다. 폰노이만 구조는 instruction 또한 데이터로써 메모리에 저장되는 컴퓨터 구조이다. 폰노이만 구조의 CPU는 메모리로부터 반복적으로 instruction을 읽고, 해석하고, 실행한다. 이때 CPU가 해석하고 실행할 수 있는 instruction들은 CPU 하드웨어 설계시에 결정된다. 이러한 instrucion들을 기계어라고 한다. 기계어로 프로그래밍을 하는 것은 매우 비효율적인 작업이다. 그래서 기계어보다 알아보기 쉬운 어셈블리어가 고안되었다. 그러나 어셈블리어도 instruction의 각 요소를 니모닉에 1대1 대응시켰을 뿐이기 때문에, 더 높은 수준의 추상화가 요구되었다. 따라서 폰노이만 구조가 수행할 수 있는 동작들을 추상화시킨 고급언어가 등장하였다. 고급언어로 작성된 소스코드는 컴파일러에 의해 어셈블리어로 변환되고, 또 다시 어셈블러에 의해 CPU가 수행가능한 기계어로 변환된다.
CPU는 메모리로 저장/적재, 산술/논리 연산, jump와 같은 PC값의 변경과 같은 instruction을 수행할 수 있다. C언어에서는 변수를 통해서 메모리와 관련된 instruction을 추상화하였다. 또 +, -와 같은 기호를 통해 산술/논리 연산을 추상화하였다. if, for, while등의 조건/반복문은 jump와 같은 연산을 추상화하였다. 그리고 지역변수, 함수와 같은 문법을 통해 stack과 관련된 기능을 추상화하였다. 그외에도 type, scope와 같은 개념을 도입하여, 컴파일 타임에 오류를 확인하고 안정적인 프로그램을 작성할 수 있게 만들었다.
고급언어는 추상화를 통해 효율적인 프로그래밍을 가능하게 했다. 동시에 코드의 가독성을 올려 효과적으로 관리할 수 있다. type, scope와 같은 개념을 도입하여 프로그램의 신뢰성도 높이는 효과를 가진다. 더 나아가, 최근에는 컴파일러가 수행하는 코드 최적화의 수준이 높아, 직접 기계어로 작성하는 것보다 더 빠른 프로그램을 생성한다.

## 컴퓨팅사고력?
프로그래밍을 처음 배울때 내가 궁금해하던 내용이라 추가한다. 평소에 가졌던 사고방식을 프로그래밍에 적합하게 바꾸는 과정에서 이해한 내용이다.
컴퓨터는 만능이 아니다. 컴퓨터 프로그래밍으로 해결할 수 있는 문제는 CPU instruction의 조합으로 해결 가능해야 한다. 또한 현실적인 자원과 시간을 사용해야 한다. 따라서 내가 생각하는 컴퓨팅 사고력은 현실의 문제에 대한 인간적인 방법을 빠르게 컴퓨터가 수행가능한 instruction의 조합으로 바꾸는 능력이다. 이 능력을 얻기 위해서는 컴퓨터의 동작을 정확하게 이해하고, 프로그래밍 연습(생각을 코드로 바꾸는 작업)을 많이 해야할 것이다. 또한 컴퓨터구조, 알고리즘, 오토마타 등의 과목이 컴퓨터로 해결 가능한 문제가 무엇인지 이해하는데 도움을 주었다.

# C언어 문법 소개

## Hello World
```c
#include <stdio.h>
int main()
{
    printf("Hello World!");
    return 0;
}
```
가장 잘 알려진 C프로그램이다. 단순히 "Hello World!"라는 문장을 콘솔화면에 출력한다. C언어로 작성된 소스코드가 컴파일되면, main()이라는 함수에 작성된 내용이 가장 먼저 실행된다. main()에 작성된 내용이 순서대로 실행되고, 서브루틴 호출 이후에도 호출했던 부분부터 이어서 실행된다. 이러한 의미에서 C언어는 절차지향 언어라고 한다. "#include <stdio.h>"부분은 컴파일러 이전에 전처리기에서 처리된다. stdio.h라는 헤더파일의 내용을 저자리에 그대로 복사-붙여넣기 한다. printf()는 stdio.h에 선언된 표준함수(서브루틴)이다. 화면에 출력하는 기능은 운영체제의 도움을 받아야한다. printf()는 운영체제의 시스템콜을 호출하여 인자로 전달받은 문자열을 화면에 출력하는 기능을 수행한다. 자세한 서브루틴 실행과정은 후술한다.

## 변수
컴퓨터 시스템의 메모리를 추상화한 것이다.
```c
int a = 3; // 변수 선언
int b;
b = a; // 대입
```
위와 같이 자료형, 변수명을 나열하여 변수를 선언한다. 메모리 공간을 할당하고 이름을 붙여주는 작업이다. 이 작업을 통해서 메모리와 관련된 작업을 변수명으로 다룰 수 있다. a와 같이 선언과 동시에 초기화할 수 있다. a라는 이름의 메모리 공간에 3이라는 값을 넣어준다. 
메모리는 데이터를 저장하는 장치로, 2진수를 이용하여 데이터를 저장한다. 또한 1byte 간격으로 메모리의 주소값이 정해져있다. 현대의 메모리는 주로 RAM을 의미하며, RAM은 모든 주소값의 메모리 공간에 탐색없이 임의접근 가능한 메모리이다.
'b = a'와 같은 문장을 통해 a라는 메모리 공간의 값을 b라는 메모리 공간에 옮길 수 있다. '=' 기호의 왼쪽, 오른쪽에 따라서 메모리 저장, 적재의 기능을 직관적으로 구분한다. 수학에서의 "b와 a가 같다"라는 명제의 의미가 아닌, "b <= a로 데이터를 옮겨라"라는 명령이다.

## 자료형
```c
int a; // 정수
float b; // 실수
char c; // 문자
```
기계어에는 자료형이 없다. (floating-point 연산을 지원하는 하드웨어/instruction가 따로 있어서 정확히는 틀린말) instruction level에서는 메모리 공간에 들어있는 이진수 값을 해석하기 나름이다. 기계어로 프로그래밍을 한다면, 프로그래머가 문맥에 맞게 데이터의 포맷을 생각해야한다. 고급언어에서는 자료형이라는 개념을 제공한다. 이를통해서 데이터의 내부 표현방식을 프로그래머가 고려하지 않게 만든다. 또한 컴파일 시에 type checking을 수행하여 데이터의 포맷이 뒤섞이는 오류를 컴파일 타임에 방지한다. coercion을 통해 암묵적인 형변환도 수행하며, 이 때 포맷의 변환에 관련된 instruction을 추가해준다.

## 논리/산술 연산
```c
int a = 3, b = 2, c;
c = a + b * b;
c = a & b | b;
```
변수, 상수, 연산자를 조합하여 expression을 만들 수 있다. 연산자들은 associativity와 precedence에 따라 evaluation 순서가 구분된다. C언어에는 우리가 잘 아는 논리/산술 연산자와 메모리 관련 연산자들이 정의되어 있다.

## 조건문
```c
if(/* boolean expression */)
{
    // code
}
else
{
    // code
}
```
조건문은 프로그램의 branch를 만든다. boolean expression이 true/false일 경우에 실행될 코드를 분리할 수 있다. 내부적으로 jump를 통해서 다음 실행될 instruction의 주소값이 들어있는 PC의 값을 바꾼다.

## 반복문
```c
int i;
for(i=0; /* boolean expression */; i++)
{
    // code
}
while(/* boolean expression */)
{
    // code
}
```
반복문은 같은 코드를 여러번 반복 수행한다. C언어에는 for와 while문이 있다. boolen expression이 true일때 code부분을 반복 수행한다. for문은 boolean expression에 사용할 변수를 초기화하고 증감하는 부분이 추가되어 있다. 코드를 반복해서 수행할 때 자주 사용되는 패턴이기 때문에 while문과 구분되어 사용된다. 조건문과 마찬가지로 내부적으로 jump를 통해서 다음 실행될 instruction을 loop의 시작 주소값으로 바꾸는 방식으로 동작한다.
조건문/반복문은 함수와 함께 프로그램의 control flow를 바꾸는 역할을 한다. 이것으로 코드가 단순히 순차적으로 실행되는 것 이외에, 실행 순서를 조건에 따라서 변경할 수 있다.

## 함수
```c
int func(int x)
{
    // code
    return 0;
}
```
C언어는 함수(서브루틴)을 정의하고 호출할 수 있다. 함수는 반환형, 매개변수, 함수명, code부분로 정의할 수 있다. 정의된 함수는 외부에서 호출할 수 있다. 이때 프로그램 메모리의 stack영역을 이용한다. 현재 실행되는 코드의 status를 stack에 저장하고, 서브루틴의 시작주소로 jump한다. 이때 마찬가지로 stack이나 레지스터를 이용해서 매개변수를 전달 및 초기화한다. 서브루틴의 코드가 다 실행되고 'return'하면, stack에 저장된 이전 흐름의 status를 복구하고 이어서 실행된다. 이때 레지스터를 통해서 반환값을 전달할 수 있다. 반복되는 코드는 함수화하여 재사용할 수 있다. 이것은 불필요한 중복을 줄여준다. 또한 기능단위로 잘 정의된다면 코드를 추상화하여 사용할 수 있다. 함수를 통해 코드를 잘 추상화해야 복잡한 프로그램을 쉽게 작성할 수 있다.

# Next
앞으로 시간이 있다면 위에 간략하게 서술한 문법요소들을 자세히 포스팅할 것이다. 메모리 저장구조, 기본 입출력 함수, 배열, 포인터, 구조체와 같은 문법요소도 추가로 작성할 것이다.